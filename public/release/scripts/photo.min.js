!function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define("coverLayer",[],e):window.coverLayer=e()}(function(){var e={message:'<h1>please wait...</h1><button data-action="close-layer">关闭</button>',name:"photo-layer",full:!0,baseZ:1100,speed:1e3,needCloseBtn:!1,needLeftBtn:!1,needRightBtn:!1,closeBtn:'[data-action="close-layer"]',leftBtn:'[data-action="left"]',rightBtn:'[data-action="right"]',onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,leftBtnEvent:null,rightBtnEvent:null},t=function(e,t,n){var o;return function(){var a=arguments,r=this,i=function(){o=null,n||e.apply(r||this,a)},s=!o&&n;clearTimeout(o),o=setTimeout(i,t),s&&e.apply(r||this,a)}},n={opts:{currentLayerId:"",layers:[],layerContent:[],layerBtns:[],count:0},create:function(t){var n=this;n.opts=$.extend(!0,{},e,this.opts,t||{}),n.opts.currentLayerId=n.opts.name?n.opts.name:(new Date).toUTCString()+(1e5*Math.random()).toFixed();var o=$('<div class="overLayer" style="display: none; position: fixed; z-index:'+n.opts.baseZ++ +'; margin: 0; padding: 0; width: 100%;height: 100%; top:0; left: 0;opacity: 0.6;filter: alpha(opacity=60); background-color: #000"></div>'),a=$('<div class="contentLayer" style="display: none; position: fixed; z-index: '+n.opts.baseZ++ +'; margin: 0; padding: 0; width: 100%;height: 100%; top:0; left: 0;"></div>');if(n.opts.layers=[o,a],$.each(n.opts.layers,function(){this.attr("data-layer",n.opts.currentLayerId),$("body").append(this)}),n.opts.message){var r=$('<div class="contentWrapper" style="position:absolute"></div>');$(a).empty().append(r),$(n.opts.message).appendTo(r),n.opts.layerContent.push($(r))}else try{console.log("没有HTML")}catch(i){}if(n.opts.needCloseBtn){var s=$('<a href="javascript:;" style="display: block; position:absolute; right: 20px; top: 20px; color: #fff; text-decoration: none;" data-action="close-layer"><span class="icon-remove icon-4x"></span></a>');$(a).append(s)}if(n.opts.needLeftBtn){var l=$('<a href="javascript:;" style="display: block; position:absolute; left: 20px; top: 50%; color: #fff; text-decoration: none;" data-action="left"><span class="icon-angle-left icon-4x"></span></a>');$(a).append(l),n.opts.layerBtns.push($(l))}if(n.opts.needRightBtn){var c=$('<a href="javascript:;" style="display: block; position:absolute; right: 20px; top: 50%; color: #fff; text-decoration: none;" data-action="right"><span class="icon-angle-right icon-4x"></span></a>');$(a).append(c),n.opts.layerBtns.push($(c))}n.initEvents()},open:function(e){var t=this;if(t.opts.currentLayerId)return void console.log("已有层创建！");try{this.create(e)}catch(n){return void console.log("创建层失败")}"function"==typeof t.opts.onBeforeOpen&&t.opts.onBeforeOpen.apply(t,e),t.show()},show:function(){var e=this,t=e.opts.layers;$.each(t,function(n){$(this).fadeIn(e.opts.speed),n===t.length-1&&(e.setLayerPosition(),e.setBtnsPosition())}),"function"==typeof e.opts.onAfterOpen&&e.opts.onAfterOpen.apply(e,opts)},remove:function(){var e=this;$.each(e.opts.layers,function(){this.remove()}),e.reset()},reset:function(){var e=this;e.opts.currentLayerId="",e.opts.layers=[],e.opts.layerContent=[],e.opts.layerBtns=[],$(window).off("resize.Layer"),$(document).off("click.Layer")},close:function(){var e=this,t=e.opts.layers;"function"==typeof e.opts.onBeforeClose&&e.opts.onBeforeClose.apply(e,opts),$.each(t,function(n){this.fadeOut(e.opts.speed,function(){n===t.length-1&&e.remove()})}),"function"==typeof e.opts.onAfterClose&&e.opts.onAfterClose.apply(e,opts)},setLayerPosition:function(){var e=this,t=e.opts.layerContent[0];t.css({left:$(window).outerWidth()/2-t.outerWidth()/2,top:$(window).outerHeight()/2-t.outerHeight()/2})},setBtnsPosition:function(){var e=this,t=e.opts.layerBtns;0!==t.length&&$.each(t,function(){this.css({top:$(window).outerHeight()/2-this.outerHeight()/2})})},initEvents:function(){var e=this;$(document).on("click.Layer",e.opts.closeBtn,function(){e.close()}),$(window).on("resize.Layer",function(){t(function(){e.setLayerPosition()},200)}),$(document).on("click.Layer",e.opts.leftBtn,function(){"function"==typeof e.opts.leftBtnEvent&&e.opts.leftBtnEvent.apply(e,[])}),$(document).on("click.Layer",e.opts.rightBtn,function(){"function"==typeof e.opts.rightBtnEvent&&e.opts.rightBtnEvent.apply(e,[])})}};return n}),function(e){var t;if("object"==typeof module&&"object"==typeof module.exports){try{t=require("layer")}catch(n){}module.exports=e(t)}else"function"==typeof define&&define.amd?define("photoWard",["require"],function(n){var o="layer";try{t=n(o)}catch(a){console.log("导入出错")}return e(t)}):window.photoWard=e(window.layer)}(function(e){var t={leftPadding:50,topPadding:50,imageMargin:10,headerHeight:50,lineHeight:162,rotateDeg:360,delayTime:1e3,wrapper:"#photo-content",imageTemplFun:null,getPhotoArr:null},n=function(e){this.opts=$.extend(!0,{},t,e||{}),this.init()};return n.prototype={init:function(){var e=this;e.initElements(),e.initAttrs(),e.setImageTemplate(),e.getPhotoSrc(),e.initEvents(),e.renderPhotos(),e.initComponent()},initElements:function(){var e=this;e.$photoContent=$(e.opts.wrapper)},initAttrs:function(){var e=this;e.$imgs=[],e.photoArr=[],e.originalHeight=e.$photoContent.height(),e.firstLoad=!0},initComponent:function(){},initEvents:function(){var e=this;$(window).resize(e.debounce(function(){e.firstLoad?e.resizePhotos():e.afterFirstClick()},200)),$(document).one("click","img",function(){e.firstLoad=!1,e.afterFirstClick(),setTimeout(function(){e.initHoverEvent()},1e3)})},initHoverEvent:function(){var t=this;$("img").click(function(){var n=$(this);e.open({message:'<div style="background: #fff;"><img style="" class="bigImg" src="" alt=""/></div>',needCloseBtn:!0,needLeftBtn:!0,needRightBtn:!0,leftBtnEvent:function(){t.leftBtnEvent(),e.setLayerPosition()},rightBtnEvent:function(){t.rightBtnEvent(),e.setLayerPosition()},onBeforeOpen:function(){t.setLayerSrc(n)}})})},setImageTemplate:function(){var e=this;e.opts.imageTemplFun&&"function"==typeof e.opts.imageTemplFun&&e.opts.imageTemplFun.apply(null,[])},getPhotoSrc:function(){var e=this,t="styles/images/";if(e.opts.getPhotoArr&&"function"==typeof e.opts.getPhotoArr)return void e.opts.getPhotoArr.apply(null,[]);for(var n=1;20>n&&e.photoArr.push(function(e){return t+e+".jpg"}(n));n++);},calculateCenterPoint:function(e){var t=this;return{x:t.$photoContent.outerWidth()/2,y:t.$photoContent.outerHeight()/2}},renderPhotos:function(){for(var e=this,t=0;t<e.photoArr.length;t++){var n=$("<img />").attr({src:e.photoArr[t],"data-src":e.photoArr[t]}),o=e.opts.rotateDeg/e.photoArr.length;e.$imgs.push(n),function(t){n.load(function(){e.$photoContent.append($(this));var n=e.calculateCenterPoint($(this));$(this).css({transform:"rotate("+t*o+"deg)",zIndex:t,left:n.x,top:n.y})})}(t)}},resizePhotos:function(){for(var e=this,t=e.$imgs,n=0;n<t.length;n++){var o=e.calculateCenterPoint(t[n]);t[n].css({left:o.x,top:o.y})}},afterFirstClick:function(){for(var e=this,t=e.$imgs,n=0,o=0,a=0,r=0,i=e.opts.leftPadding,s=e.opts.topPadding+e.opts.headerHeight,l=e.opts.imageMargin,c=e.opts.lineHeight,p=0;p<t.length;p++)n+=t[p].outerWidth()+l,r+=t[p].outerHeight(),n-l>e.$photoContent.width()&&(o++,a=0,n=t[p].outerWidth()+l),t[p].animate({left:i+n-t[p].outerWidth()-l,top:s+o*c},e.opts.delayTime).css({transform:"rotate(0deg)"}),a++;e.$photoContent.height(o*c>e.originalHeight?o*c+s:e.originalHeight)},debounce:function(e,t,n){var o;return function(){var a=arguments,r=this,i=function(){o=null,n||e.apply(r||this,a)},s=!o&&n;clearTimeout(o),o=setTimeout(i,t),s&&e.apply(r,a)}},setLayerSrc:function(e){var t=this;t.currentIndex=e.index();var n=e.attr("data-src");$(".bigImg").attr("src",n)},leftBtnEvent:function(){var e=this;return--e.currentIndex<0?void(e.currentIndex=0):void $(".bigImg").attr("src",e.photoArr[e.currentIndex])},rightBtnEvent:function(){var e=this,t=e.photoArr;return++e.currentIndex>t.length-1?void(e.currentIndex=t.length-1):void $(".bigImg").attr("src",t[e.currentIndex])}},n}),require(["react"],function(e){var t=e.createClass({displayName:"NavBar",render:function(){return e.createElement("div",{className:"navbar navbar-inverse navbar-fixed-top index-navbar"},e.createElement("div",{className:"container-fluid"},e.createElement("div",{className:"navbar-header"},e.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#index-nav-bar","aria-expanded":"false"},e.createElement("span",{className:"sr-only"},"Toggle navigation"),e.createElement("span",{className:"icon-bar"}),e.createElement("span",{className:"icon-bar"}),e.createElement("span",{className:"icon-bar"})),e.createElement("a",{className:"navbar-brand",href:"#"},"Blog")),e.createElement("div",{className:"collapse navbar-collapse",id:"index-nav-bar"},e.createElement("ul",{className:"nav navbar-nav header-nav"},e.createElement("li",null,e.createElement("a",{href:"/"},"主页")),e.createElement("li",null,e.createElement("a",{href:"/article"},"文章")),e.createElement("li",null,e.createElement("a",{href:"/note"},"随笔")),e.createElement("li",null,e.createElement("a",{href:"/photo"},"照片墙"))))))}});e.render(e.createElement(t,null),document.getElementById("nav-bar"))}),define("navBar",function(){}),require(["react"],function(e){var t=e.createClass({displayName:"FooterTop",render:function(){return e.createElement("div",{className:"row footer-top"},e.createElement("div",{className:"col-sm-6 col-lg-6"},e.createElement("h4",null,"个人小站")),e.createElement("div",{className:"col-sm-6  col-lg-5 col-lg-offset-1"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-4"},e.createElement("h4",null,"关于")),e.createElement("div",{className:"col-xs-4"},e.createElement("h4",null,"联系我")),e.createElement("div",{className:"col-xs-4"},e.createElement("h4",null,"其它")))))}}),n=e.createClass({displayName:"FooterBottom",render:function(){return e.createElement("div",{className:"row footer-bottom"},e.createElement("ul",{className:"list-inline text-center"},e.createElement("li",null,"have a nice day")))}}),o=e.createClass({displayName:"Footer",render:function(){return e.createElement("div",{className:"container"},e.createElement(t,null),e.createElement("hr",null),e.createElement(n,null))}});e.render(e.createElement(o,null),document.getElementById("footer"))}),define("footer",function(){}),require(["react","coverLayer","photoWard","bootstrap","jquery","navBar","footer"],function(e,t,n){var o={init:function(){var e=this;e.initElements(),e.initComponent()},initElements:function(){var e=this;e.headerLink=$(".header-nav").find("li")},initComponent:function(){var e=this;e.photoWard=new n,e.initHeaderBar()},initHeaderBar:function(){var e=this;e.headerLink.eq(3).addClass("active")}};o.init()}),define("app/photo/main.js",function(){});